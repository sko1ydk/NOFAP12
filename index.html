<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIT PORN. BECOME A KING.</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Roboto+Condensed:wght@700&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto Condensed', sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
            background-image: 
                linear-gradient(rgba(10, 10, 10, 0.9), rgba(10, 10, 10, 0.9)),
                url('https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* User Account Styles */
        .user-account {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px 20px;
            border-radius: 50px;
            border: 1px solid rgba(212, 175, 55, 0.4);
            z-index: 100;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #f0d78c);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 4px 8px rgba(212, 175, 55, 0.3);
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 16px;
            font-weight: 700;
            color: #d4af37;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .user-stats {
            font-size: 12px;
            color: #a0a0a0;
        }

        .logout-btn {
            background: transparent;
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            font-size: 16px;
            transition: color 0.3s ease;
        }

        .logout-btn:hover {
            color: #d4af37;
        }

        /* Top Wake-Up Button */
        .top-wakeup-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8b0000, #ff0000);
            color: #fff;
            border: none;
            border-radius: 50px;
            padding: 14px 24px;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            z-index: 100;
            box-shadow: 0 6px 20px rgba(139, 0, 0, 0.6);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }

        .top-wakeup-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.8);
        }

        .top-wakeup-btn:active {
            transform: translateY(1px);
        }

        .top-wakeup-btn i {
            font-size: 18px;
        }

        /* Settings Button */
        .settings-btn {
            position: fixed;
            top: 85px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: #d4af37;
            border: 1px solid rgba(212, 175, 55, 0.4);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .settings-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        header {
            text-align: center;
            padding: 2.5rem 1rem;
            background: rgba(0, 0, 0, 0.7);
            border-bottom: 2px solid #d4af37;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-family: 'Oswald', sans-serif;
            font-size: 3.8rem;
            letter-spacing: 3px;
            color: #d4af37;
            text-transform: uppercase;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #a0a0a0;
            letter-spacing: 2px;
            font-weight: 400;
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .timer-container {
            background: rgba(20, 20, 20, 0.9);
            border-radius: 15px;
            padding: 2.5rem;
            width: 100%;
            max-width: 900px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(10px);
        }

        .streak-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .streak-box {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid #d4af37;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            flex: 1;
            min-width: 140px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .streak-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
            background: rgba(212, 175, 55, 0.15);
        }

        .streak-box h3 {
            font-size: 1rem;
            color: #a0a0a0;
            margin-bottom: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .streak-box .value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #d4af37;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .progress-container {
            width: 100%;
            height: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 2rem 0;
            overflow: hidden;
            transition: all 0.5s ease;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #f0d78c);
            width: 0%;
            transition: width 1s ease;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .countdown {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            transition: all 0.5s ease;
        }

        .time-unit {
            text-align: center;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 1.5rem;
            min-width: 110px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .time-unit:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
            background: rgba(0, 0, 0, 0.8);
        }

        .time-unit .value {
            font-size: 3rem;
            font-weight: 700;
            color: #d4af37;
            line-height: 1;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .time-unit .label {
            font-size: 1rem;
            color: #a0a0a0;
            margin-top: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .motivation {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            border-left: 5px solid #d4af37;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .motivation:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        .motivation p {
            font-size: 1.3rem;
            line-height: 1.6;
            font-style: italic;
            color: #e0e0e0;
        }

        .motivation .author {
            margin-top: 0.8rem;
            font-size: 1rem;
            color: #d4af37;
            font-weight: 700;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1.2rem;
            flex-wrap: wrap;
        }

        button {
            background: #d4af37;
            color: #000;
            border: none;
            border-radius: 8px;
            padding: 1rem 2rem;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            min-width: 140px;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s ease;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.5);
        }

        button:active {
            transform: translateY(1px);
        }

        .panic-btn {
            background: #ff0000;
            color: #fff;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
        }

        .panic-btn:hover {
            background: #ff3333;
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.6);
        }

        .breathe-btn {
            background: #1e88e5;
            color: #fff;
            box-shadow: 0 4px 15px rgba(30, 136, 229, 0.4);
        }

        .breathe-btn:hover {
            background: #42a5f5;
            box-shadow: 0 8px 25px rgba(30, 136, 229, 0.6);
        }

        .reset-btn {
            background: #8b0000;
            color: #fff;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
        }

        .reset-btn:hover {
            background: #a00000;
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.6);
        }

        .disciplined-mode-btn {
            background: #4a4a4a;
            color: #fff;
            box-shadow: 0 4px 15px rgba(74, 74, 74, 0.4);
        }

        .disciplined-mode-btn:hover {
            background: #6a6a6a;
            box-shadow: 0 8px 25px rgba(74, 74, 74, 0.6);
        }

        .disciplined-mode-btn.active {
            background: #d4af37;
            color: #000;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
        }

        .disciplined-mode-btn.active:hover {
            background: #f0d78c;
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.6);
        }

        .record-message-btn {
            background: #9c27b0;
            color: #fff;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .record-message-btn:hover {
            background: #ab47bc;
            box-shadow: 0 8px 25px rgba(156, 39, 176, 0.6);
        }

        .stats-btn {
            background: #00897b;
            color: #fff;
            box-shadow: 0 4px 15px rgba(0, 137, 123, 0.4);
        }

        .stats-btn:hover {
            background: #26a69a;
            box-shadow: 0 8px 25px rgba(0, 137, 123, 0.6);
        }

        .completed {
            background: rgba(0, 128, 0, 0.2);
            border: 2px solid #00ff00;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            text-align: center;
            display: none;
            box-shadow: 0 4px 15px rgba(0, 255, 0, 0.3);
        }

        .completed h3 {
            color: #00ff00;
            font-size: 1.8rem;
            margin-bottom: 0.8rem;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        footer {
            text-align: center;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.7);
            border-top: 1px solid #333;
            font-size: 1rem;
            color: #777;
            backdrop-filter: blur(10px);
        }

        /* Disciplined Mode Styles */
        body.disciplined-mode .countdown,
        body.disciplined-mode .progress-container {
            opacity: 0;
            height: 0;
            margin: 0;
            overflow: hidden;
        }

        /* Red Zone Styles */
        .red-zone {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(139, 0, 0, 0.98);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .red-zone.active {
            opacity: 1;
            visibility: visible;
        }

        .red-zone-content {
            text-align: center;
            max-width: 900px;
            width: 100%;
        }

        .red-zone h2 {
            font-size: 3.5rem;
            color: #ff0000;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            animation: blink 1s infinite;
            text-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .red-zone-timer {
            font-size: 3rem;
            color: #ffffff;
            margin-bottom: 2rem;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .red-zone-message {
            font-size: 1.8rem;
            color: #ffffff;
            margin-bottom: 2rem;
            line-height: 1.5;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 2rem;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .red-zone-controls {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .red-zone button {
            padding: 1.5rem 2.5rem;
            font-size: 1.2rem;
            min-width: 180px;
        }

        .exit-red-zone {
            background: #ffffff;
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }

        .exit-red-zone:hover {
            background: #f0f0f0;
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.5);
        }

        .play-message-btn {
            background: #9c27b0;
            color: #fff;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .play-message-btn:hover {
            background: #ab47bc;
            box-shadow: 0 8px 25px rgba(156, 39, 176, 0.6);
        }

        /* Red Zone Distraction Exercise */
        .distraction-exercise {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .distraction-exercise h3 {
            color: #d4af37;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            font-size: 1.5rem;
        }

        .math-problem {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #ffffff;
        }

        .math-answer {
            width: 120px;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #333;
            border-radius: 8px;
            color: #fff;
            text-align: center;
            margin: 0 auto;
            display: block;
            font-size: 1.2rem;
        }

        .check-answer {
            margin-top: 1.5rem;
            background: #4caf50;
            color: #fff;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .check-answer:hover {
            background: #66bb6a;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }

        /* Breathing Exercise Styles */
        .breathing-exercise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(30, 136, 229, 0.98);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .breathing-exercise.active {
            opacity: 1;
            visibility: visible;
        }

        .breathing-content {
            text-align: center;
            max-width: 900px;
            width: 100%;
        }

        .breathing-exercise h2 {
            font-size: 3.5rem;
            color: #ffffff;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .breathing-mode-selector {
            margin-bottom: 2rem;
        }

        .breathing-mode-selector select {
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            border: 1px solid #fff;
            border-radius: 8px;
            padding: 1rem 2rem;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .breathing-circle {
            width: 220px;
            height: 220px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            margin: 2rem auto;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            color: #ffffff;
            transition: all 4s ease-in-out;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }

        .breathing-circle.inhale {
            transform: scale(1.5);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.5);
        }

        .breathing-circle.hold {
            transform: scale(1.5);
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.6);
        }

        .breathing-circle.exhale {
            transform: scale(1);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }

        .breathing-instructions {
            font-size: 1.5rem;
            color: #ffffff;
            margin-bottom: 2rem;
            line-height: 1.5;
            padding: 0 2rem;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .breathing-controls {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .breathing-controls button {
            padding: 1.5rem 2.5rem;
            font-size: 1.2rem;
            min-width: 180px;
        }

        .exit-breathing {
            background: #ffffff;
            color: #1e88e5;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }

        .exit-breathing:hover {
            background: #f0f0f0;
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.5);
        }

        /* Message Recorder Styles */
        .message-recorder {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .message-recorder.active {
            opacity: 1;
            visibility: visible;
        }

        .recorder-content {
            width: 100%;
            max-width: 1000px;
            background: rgba(20, 20, 20, 0.95);
            border-radius: 15px;
            padding: 3rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }

        .message-recorder h2 {
            font-size: 2.8rem;
            color: #d4af37;
            text-transform: uppercase;
            margin-bottom: 2rem;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
            text-align: center;
        }

        .recorder-instructions {
            font-size: 1.4rem;
            color: #e0e0e0;
            margin-bottom: 2.5rem;
            line-height: 1.6;
            text-align: center;
        }

        .mobile-warning {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: #ff7777;
            display: none;
        }

        .recorder-panels {
            display: flex;
            flex-direction: column;
            gap: 2.5rem;
        }

        .voice-recorder-panel,
        .text-recorder-panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .panel-title {
            font-size: 1.5rem;
            color: #d4af37;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .panel-status {
            font-size: 1rem;
            color: #a0a0a0;
        }

        .recording-controls {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .record-btn {
            background: #ff0000;
            color: #fff;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
        }

        .record-btn:hover {
            background: #ff3333;
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.6);
        }

        .record-btn.recording {
            background: #ff3333;
            animation: pulse 1.5s infinite;
        }

        .play-voice-btn {
            background: #4caf50;
            color: #fff;
            padding: 1rem 2rem;
            display: none;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .play-voice-btn:hover {
            background: #66bb6a;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }

        .voice-timer {
            text-align: center;
            font-size: 1.3rem;
            color: #a0a0a0;
            margin-top: 1rem;
            display: none;
        }

        .voice-timer.active {
            display: block;
        }

        .paper-container {
            background: #f8f5e6;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
            padding: 2.5rem;
            position: relative;
            min-height: 450px;
        }

        .paper-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(#e0d9c0 1px, transparent 1px);
            background-size: 100% 2.5rem;
            pointer-events: none;
            z-index: 1;
        }

        .paper-textarea {
            width: 100%;
            min-height: 400px;
            background: transparent;
            border: none;
            color: #333;
            font-family: 'Caveat', cursive;
            font-size: 1.6rem;
            line-height: 2.5rem;
            resize: none;
            outline: none;
            position: relative;
            z-index: 2;
        }

        .paper-textarea::placeholder {
            color: #999;
        }

        .recorder-actions {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 2.5rem;
        }

        .save-message-btn {
            background: #4caf50;
            color: #fff;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .save-message-btn:hover {
            background: #66bb6a;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }

        .cancel-recording-btn {
            background: #8b0000;
            color: #fff;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
        }

        .cancel-recording-btn:hover {
            background: #a00000;
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.6);
        }

        /* Message Playback Styles */
        .message-playback {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .message-playback.active {
            opacity: 1;
            visibility: visible;
        }

        .playback-content {
            width: 100%;
            max-width: 1000px;
            background: rgba(20, 20, 20, 0.95);
            border-radius: 15px;
            padding: 3rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }

        .message-playback h2 {
            font-size: 2.8rem;
            color: #d4af37;
            text-transform: uppercase;
            margin-bottom: 2rem;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
            text-align: center;
        }

        .playback-panels {
            display: flex;
            flex-direction: column;
            gap: 2.5rem;
        }

        .voice-playback-panel,
        .text-playback-panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .playback-panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .playback-panel-title {
            font-size: 1.5rem;
            color: #d4af37;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .voice-playback-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .voice-playback-btn {
            background: #4caf50;
            color: #fff;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .voice-playback-btn:hover {
            background: #66bb6a;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }

        .voice-playback-status {
            font-size: 1.3rem;
            color: #a0a0a0;
        }

        .message-display {
            background: #f8f5e6;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
            padding: 2.5rem;
            position: relative;
            min-height: 250px;
        }

        .message-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(#e0d9c0 1px, transparent 1px);
            background-size: 100% 2.5rem;
            pointer-events: none;
            z-index: 1;
        }

        .message-text {
            color: #333;
            font-family: 'Caveat', cursive;
            font-size: 1.6rem;
            line-height: 2.5rem;
            position: relative;
            z-index: 2;
            white-space: pre-wrap;
        }

        .playback-actions {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 2.5rem;
        }

        .close-playback-btn {
            background: #8b0000;
            color: #fff;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
        }

        .close-playback-btn:hover {
            background: #a00000;
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.6);
        }

        /* Wake-Up Mode Styles */
        .wakeup-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .wakeup-mode.active {
            opacity: 1;
            visibility: visible;
        }

        .wakeup-content {
            text-align: center;
            max-width: 1000px;
            width: 100%;
            background: rgba(20, 20, 20, 0.95);
            border-radius: 15px;
            padding: 3rem;
            border: 1px solid #8b0000;
            box-shadow: 0 15px 35px rgba(139, 0, 0, 0.6);
        }

        .wakeup-mode h2 {
            font-size: 3.2rem;
            color: #ff3333;
            text-transform: uppercase;
            margin-bottom: 2rem;
            text-shadow: 0 0 15px rgba(255, 51, 51, 0.6);
            letter-spacing: 3px;
        }

        .wakeup-intro {
            font-size: 1.5rem;
            color: #ffffff;
            margin-bottom: 2.5rem;
            padding: 1.5rem;
            background: rgba(139, 0, 0, 0.3);
            border-radius: 10px;
            border-left: 5px solid #ff3333;
            overflow: hidden;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.3);
        }

        .animated-text {
            white-space: nowrap;
            animation: scrollText 20s linear infinite;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #ff3333;
            text-shadow: 0 0 10px rgba(255, 51, 51, 0.6);
        }

        @keyframes scrollText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .wakeup-tabs {
            display: flex;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 2.5rem;
            border-bottom: 1px solid #333;
            padding-bottom: 1.5rem;
        }

        .tab-btn {
            background: transparent;
            color: #777;
            border: none;
            border-bottom: 2px solid transparent;
            padding: 1rem 2rem;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        .tab-btn:hover {
            color: #ccc;
        }

        .tab-btn.active {
            color: #ff3333;
            border-bottom-color: #ff3333;
        }

        .tab-content {
            display: none;
            text-align: left;
            padding: 1.5rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h3 {
            font-size: 2rem;
            color: #ff3333;
            margin-bottom: 2rem;
            text-transform: uppercase;
            text-align: center;
            text-shadow: 0 0 10px rgba(255, 51, 51, 0.5);
        }

        .truth-item, .psychology-item, .tactic-item {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 4px solid #ff3333;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .truth-item:hover, .psychology-item:hover, .tactic-item:hover {
            transform: translateX(8px);
            background: rgba(139, 0, 0, 0.2);
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.4);
        }

        .truth-item h4, .psychology-item h4, .tactic-item h4 {
            font-size: 1.5rem;
            color: #d4af37;
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        .truth-item p, .psychology-item p, .tactic-item p {
            font-size: 1.2rem;
            color: #e0e0e0;
            line-height: 1.6;
        }

        .wakeup-controls {
            display: flex;
            justify-content: center;
            margin-top: 2.5rem;
            gap: 1.5rem;
        }

        .exit-wakeup {
            background: #d4af37;
            color: #000;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            min-width: 200px;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
        }

        .exit-wakeup:hover {
            background: #f0d78c;
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.6);
        }

        .take-action-btn {
            background: #ff3333;
            color: #fff;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            min-width: 200px;
            box-shadow: 0 4px 15px rgba(255, 51, 51, 0.4);
        }

        .take-action-btn:hover {
            background: #ff5555;
            box-shadow: 0 8px 25px rgba(255, 51, 51, 0.6);
        }

        /* Interactive elements in Wake-Up Mode */
        .interactive-item {
            position: relative;
            cursor: pointer;
        }

        .interactive-item::after {
            content: "\f107";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            right: 20px;
            top: 20px;
            color: #d4af37;
            transition: transform 0.3s ease;
        }

        .interactive-item.expanded::after {
            transform: rotate(180deg);
        }

        .interactive-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            margin-top: 1rem;
        }

        .interactive-item.expanded .interactive-content {
            max-height: 1000px;
        }

        .tactic-checkbox {
            margin-right: 12px;
            transform: scale(1.3);
        }

        .tactic-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 1.5rem 2rem;
            border-radius: 12px;
            border-left: 5px solid #d4af37;
            z-index: 100;
            transform: translateX(150%);
            transition: transform 0.5s ease;
            max-width: 80%;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .notification.show {
            transform: translateX(0);
        }

        /* User Account Modal */
        .user-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .user-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(20, 20, 20, 0.98);
            border-radius: 15px;
            padding: 3rem;
            width: 100%;
            max-width: 600px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .modal-header h2 {
            font-size: 2.5rem;
            color: #d4af37;
            text-transform: uppercase;
            margin-bottom: 1rem;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        .modal-header p {
            color: #a0a0a0;
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            color: #d4af37;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 1rem;
            letter-spacing: 1px;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #333;
            border-radius: 8px;
            color: #e0e0e0;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .modal-actions {
            display: flex;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .modal-actions button {
            flex: 1;
            padding: 1.2rem;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: #a0a0a0;
            font-size: 1.8rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: #d4af37;
        }

        .switch-form {
            text-align: center;
            margin-top: 1.5rem;
            color: #a0a0a0;
            font-size: 1.1rem;
        }

        .switch-form a {
            color: #d4af37;
            text-decoration: none;
            font-weight: 700;
        }

        .switch-form a:hover {
            text-decoration: underline;
        }

        /* Settings Modal */
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .settings-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .settings-content {
            background: rgba(20, 20, 20, 0.98);
            border-radius: 15px;
            padding: 3rem;
            width: 100%;
            max-width: 700px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            max-height: 85vh;
            overflow-y: auto;
        }

        .settings-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .settings-header h2 {
            font-size: 2.5rem;
            color: #d4af37;
            text-transform: uppercase;
            margin-bottom: 1rem;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        .settings-section {
            margin-bottom: 2.5rem;
        }

        .settings-section h3 {
            font-size: 1.5rem;
            color: #d4af37;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            border-bottom: 1px solid #333;
            padding-bottom: 0.8rem;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-label {
            color: #e0e0e0;
            font-size: 1.1rem;
        }

        .settings-control {
            display: flex;
            align-items: center;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #333;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .toggle-switch.active {
            background: #d4af37;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .toggle-switch::after {
            content: "";
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: #fff;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active::after {
            transform: translateX(30px);
        }

        .settings-actions {
            display: flex;
            gap: 1.5rem;
            margin-top: 2.5rem;
        }

        .settings-actions button {
            flex: 1;
        }

        .danger-btn {
            background: #8b0000;
            color: #fff;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
        }

        .danger-btn:hover {
            background: #a00000;
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.6);
        }

        /* Statistics Modal */
        .stats-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .stats-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .stats-content {
            background: rgba(20, 20, 20, 0.98);
            border-radius: 15px;
            padding: 3rem;
            width: 100%;
            max-width: 700px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }

        .stats-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .stats-header h2 {
            font-size: 2.5rem;
            color: #d4af37;
            text-transform: uppercase;
            margin-bottom: 1rem;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2.5rem;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(212, 175, 55, 0.2);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
            background: rgba(0, 0, 0, 0.6);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .stat-label {
            color: #a0a0a0;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stats-actions {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }

        /* Media Queries for Responsive Design */
        @media (max-width: 768px) {
            .user-account {
                top: 15px;
                left: 15px;
                padding: 10px 15px;
            }
            
            .user-avatar {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .user-name {
                font-size: 14px;
            }
            
            .user-stats {
                font-size: 11px;
            }
            
            .top-wakeup-btn {
                top: 15px;
                right: 15px;
                padding: 12px 18px;
                font-size: 12px;
            }
            
            .settings-btn {
                top: 75px;
                right: 15px;
                width: 45px;
                height: 45px;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .timer-container {
                padding: 1.5rem;
            }
            
            .streak-box {
                min-width: 120px;
                padding: 1.2rem;
            }
            
            .streak-box h3 {
                font-size: 0.9rem;
            }
            
            .streak-box .value {
                font-size: 1.8rem;
            }
            
            .time-unit {
                min-width: 80px;
                padding: 1.2rem;
            }
            
            .time-unit .value {
                font-size: 2.2rem;
            }
            
            .time-unit .label {
                font-size: 0.9rem;
            }
            
            .motivation p {
                font-size: 1.1rem;
            }
            
            .motivation .author {
                font-size: 0.9rem;
            }
            
            button {
                padding: 0.9rem 1.8rem;
                font-size: 0.9rem;
                min-width: 120px;
            }
            
            .red-zone h2 {
                font-size: 2.8rem;
            }
            
            .red-zone-timer {
                font-size: 2.2rem;
            }
            
            .red-zone-message {
                font-size: 1.4rem;
                min-height: 100px;
            }
            
            .breathing-exercise h2 {
                font-size: 2.8rem;
            }
            
            .breathing-circle {
                width: 180px;
                height: 180px;
                font-size: 1.3rem;
            }
            
            .breathing-instructions {
                font-size: 1.3rem;
            }
            
            .notification {
                top: 15px;
                right: 15px;
                padding: 1.2rem 1.8rem;
                font-size: 0.9rem;
            }
            
            /* Wake-Up Mode Responsive */
            .wakeup-mode h2 {
                font-size: 2.5rem;
            }
            
            .wakeup-intro {
                font-size: 1.2rem;
                height: 60px;
            }
            
            .animated-text {
                font-size: 1.2rem;
            }
            
            .tab-btn {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }
            
            .tab-content h3 {
                font-size: 1.7rem;
            }
            
            .truth-item, .psychology-item, .tactic-item {
                padding: 1.5rem;
            }
            
            .truth-item h4, .psychology-item h4, .tactic-item h4 {
                font-size: 1.3rem;
            }
            
            .truth-item p, .psychology-item p, .tactic-item p {
                font-size: 1.1rem;
            }
            
            .exit-wakeup, .take-action-btn {
                padding: 1rem 2rem;
                font-size: 1.1rem;
                min-width: 170px;
            }
            
            /* Message Recorder Responsive */
            .recorder-content {
                padding: 2rem;
            }
            
            .message-recorder h2 {
                font-size: 2.2rem;
            }
            
            .recorder-instructions {
                font-size: 1.2rem;
            }
            
            .record-btn {
                width: 80px;
                height: 80px;
                font-size: 1.8rem;
            }
            
            .paper-container {
                min-height: 350px;
                padding: 2rem;
            }
            
            .paper-textarea {
                min-height: 300px;
                font-size: 1.5rem;
            }
            
            .save-message-btn, .cancel-recording-btn {
                padding: 1rem 2rem;
                font-size: 1.1rem;
            }
            
            /* Stats Responsive */
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .user-account {
                flex-direction: column;
                gap: 8px;
                padding: 8px 12px;
            }
            
            .user-info {
                flex-direction: row;
                align-items: center;
                gap: 12px;
            }
            
            .top-wakeup-btn {
                top: 10px;
                right: 10px;
                padding: 10px 14px;
                font-size: 10px;
            }
            
            .settings-btn {
                top: 65px;
                right: 10px;
                width: 40px;
                height: 40px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .streak-box {
                min-width: 100px;
                padding: 1rem;
            }
            
            .streak-box .value {
                font-size: 1.6rem;
            }
            
            .time-unit {
                min-width: 70px;
                padding: 1rem;
            }
            
            .time-unit .value {
                font-size: 2rem;
            }
            
            .time-unit .label {
                font-size: 0.8rem;
            }
            
            .motivation {
                padding: 1.2rem;
            }
            
            .motivation p {
                font-size: 1rem;
            }
            
            button {
                padding: 0.8rem 1.5rem;
                font-size: 0.8rem;
                min-width: 110px;
            }
            
            .red-zone h2 {
                font-size: 2.2rem;
            }
            
            .red-zone-timer {
                font-size: 1.8rem;
            }
            
            .red-zone-message {
                font-size: 1.2rem;
                min-height: 80px;
            }
            
            .breathing-exercise h2 {
                font-size: 2.2rem;
            }
            
            .breathing-circle {
                width: 150px;
                height: 150px;
                font-size: 1.2rem;
            }
            
            .breathing-instructions {
                font-size: 1.2rem;
            }
            
            .notification {
                top: 10px;
                right: 10px;
                padding: 1rem 1.5rem;
                font-size: 0.8rem;
            }
            
            /* Wake-Up Mode Responsive */
            .wakeup-mode h2 {
                font-size: 2rem;
            }
            
            .wakeup-intro {
                font-size: 1rem;
                height: 50px;
            }
            
            .animated-text {
                font-size: 1rem;
            }
            
            .tab-btn {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
            }
            
            .tab-content h3 {
                font-size: 1.5rem;
            }
            
            .truth-item, .psychology-item, .tactic-item {
                padding: 1.2rem;
            }
            
            .truth-item h4, .psychology-item h4, .tactic-item h4 {
                font-size: 1.2rem;
            }
            
            .truth-item p, .psychology-item p, .tactic-item p {
                font-size: 1rem;
            }
            
            .exit-wakeup, .take-action-btn {
                padding: 0.9rem 1.8rem;
                font-size: 1rem;
                min-width: 150px;
            }
            
            /* Message Recorder Responsive */
            .recorder-content {
                padding: 1.5rem;
            }
            
            .message-recorder h2 {
                font-size: 2rem;
            }
            
            .recorder-instructions {
                font-size: 1.1rem;
            }
            
            .record-btn {
                width: 70px;
                height: 70px;
                font-size: 1.6rem;
            }
            
            .paper-container {
                min-height: 300px;
                padding: 1.5rem;
            }
            
            .paper-textarea {
                min-height: 250px;
                font-size: 1.4rem;
            }
            
            .save-message-btn, .cancel-recording-btn {
                padding: 0.9rem 1.8rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- User Account -->
    <div class="user-account" id="user-account" style="display: none;">
        <div class="user-avatar" id="user-avatar">U</div>
        <div class="user-info">
            <div class="user-name" id="user-name">User</div>
            <div class="user-stats" id="user-stats">Day 1</div>
        </div>
        <button class="logout-btn" id="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </div>
    
    <!-- Settings Button -->
    <button class="settings-btn" id="settings-btn">
        <i class="fas fa-cog"></i>
    </button>
    
    <!-- Top Wake-Up Button -->
    <button id="top-wakeup-btn" class="top-wakeup-btn">
        <i class="fas fa-fire"></i> WAKE-UP MODE
    </button>
    
    <header>
        <h1>QUIT PORN. BECOME A KING.</h1>
        <p class="subtitle">DOMINATE YOUR DESIRES OR THEY WILL DOMINATE YOU</p>
    </header>
    <main>
        <div class="timer-container">
            <div class="streak-info">
                <div class="streak-box">
                    <h3>CURRENT STREAK</h3>
                    <div class="value" id="current-streak">0</div>
                </div>
                <div class="streak-box">
                    <h3>CURRENT GOAL</h3>
                    <div class="value" id="current-goal">48h</div>
                </div>
                <div class="streak-box">
                    <h3>NEXT GOAL</h3>
                    <div class="value" id="next-goal">96h</div>
                </div>
            </div>
            <div class="progress-container" id="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div class="countdown" id="countdown">
                <div class="time-unit">
                    <div class="value" id="days">00</div>
                    <div class="label">Days</div>
                </div>
                <div class="time-unit">
                    <div class="value" id="hours">00</div>
                    <div class="label">Hours</div>
                </div>
                <div class="time-unit">
                    <div class="value" id="minutes">00</div>
                    <div class="label">Minutes</div>
                </div>
                <div class="time-unit">
                    <div class="value" id="seconds">00</div>
                    <div class="label">Seconds</div>
                </div>
            </div>
            
            <div class="motivation" id="motivation" title="Click for new motivation">
                <p id="motivation-text">He who conquers himself is the mightiest warrior. Your mind is the battlefield.</p>
                <div class="author">- Confucius</div>
            </div>
            <div class="completed" id="completed">
                <h3>MISSION ACCOMPLISHED!</h3>
                <p>You've conquered this challenge. Now prepare for the next level.</p>
            </div>
            <div class="controls">
                <button id="start-btn">START MISSION</button>
                <button id="panic-btn" class="panic-btn">PANIC BUTTON</button>
                <button id="breathe-btn" class="breathe-btn">BREATHE</button>
                <button id="reset-btn" class="reset-btn">RESET STREAK</button>
                <button id="disciplined-mode-btn" class="disciplined-mode-btn">DISCIPLINED MODE</button>
                <button id="record-message-btn" class="record-message-btn">RECORD MESSAGE</button>
                <button id="stats-btn" class="stats-btn">STATISTICS</button>
            </div>
        </div>
    </main>
    <footer>
        <p> <span id="year">2024</span> THE KING'S MINDSET | DISCIPLINE EQUALS FREEDOM</p>
    </footer>
    
    <!-- Red Zone Overlay -->
    <div class="red-zone" id="red-zone">
        <div class="red-zone-content">
            <h2>RED ZONE ACTIVATED</h2>
            <div class="red-zone-timer" id="red-zone-timer">05:00</div>
            <div class="red-zone-message" id="red-zone-message">
                IF YOU GIVE IN NOW, YOU'RE FAILING YOUR FUTURE SELF!
            </div>
            <div class="distraction-exercise">
                <h3>DISTRACTION EXERCISE</h3>
                <p>Solve this math problem to break the thought pattern:</p>
                <div class="math-problem" id="math-problem">12  15 = ?</div>
                <input type="number" class="math-answer" id="math-answer" placeholder="Answer">
                <button class="check-answer" id="check-answer">CHECK ANSWER</button>
            </div>
            <div class="red-zone-controls">
                <button id="play-message-btn" class="play-message-btn" style="display: none;">PLAY MY MESSAGE</button>
                <button id="exit-red-zone" class="exit-red-zone">I'M IN CONTROL</button>
            </div>
        </div>
    </div>
    
    <!-- Breathing Exercise Overlay -->
    <div class="breathing-exercise" id="breathing-exercise">
        <div class="breathing-content">
            <h2>BREATHING EXERCISE</h2>
            <div class="breathing-mode-selector">
                <select id="breathing-mode">
                    <option value="box">Box Breathing (Navy SEALs)</option>
                    <option value="wim-hof">Wim Hof Method</option>
                    <option value="4-7-8">4-7-8 Breathing (Calm)</option>
                    <option value="coherent">Coherent Breathing</option>
                    <option value="resonance">Resonance Breathing</option>
                </select>
            </div>
            <div class="breathing-circle" id="breathing-circle">
                INHALE
            </div>
            <div class="breathing-instructions" id="breathing-instructions">
                Take a deep breath in through your nose for 4 seconds
            </div>
            <div class="breathing-controls">
                <button id="exit-breathing" class="exit-breathing">EXIT</button>
            </div>
        </div>
    </div>
    
    <!-- Message Recorder Overlay -->
    <div class="message-recorder" id="message-recorder">
        <div class="recorder-content">
            <h2>RECORD A MESSAGE TO YOUR FUTURE SELF</h2>
            <p class="recorder-instructions">
                When you're feeling strong, record a message to remind yourself why this matters. 
                When you're close to relapsing, play it back to hear your own voice from a moment of clarity.
            </p>
            
            <div class="mobile-warning" id="mobile-warning">
                <i class="fas fa-exclamation-triangle"></i> For best results, use headphones when recording on mobile devices.
            </div>
            
            <div class="recorder-panels">
                <div class="voice-recorder-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="fas fa-microphone"></i> VOICE MESSAGE
                        </div>
                        <div class="panel-status" id="voice-recorder-status">Click the microphone to start recording</div>
                    </div>
                    <div class="recording-controls">
                        <button id="record-btn" class="record-btn">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                    <div class="voice-timer" id="voice-timer">00:00</div>
                    <button id="play-voice-btn" class="play-voice-btn">
                        <i class="fas fa-play"></i> PLAY RECORDING
                    </button>
                </div>
                
                <div class="text-recorder-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="fas fa-pen"></i> WRITTEN MESSAGE
                        </div>
                        <div class="panel-status">Write your message below</div>
                    </div>
                    <div class="paper-container">
                        <div class="paper-lines"></div>
                        <textarea id="message-text" class="paper-textarea" placeholder="Write a message to your future self..."></textarea>
                    </div>
                </div>
            </div>
            
            <div class="recorder-actions">
                <button id="save-message-btn" class="save-message-btn">SAVE MESSAGE</button>
                <button id="cancel-recording-btn" class="cancel-recording-btn">CANCEL</button>
            </div>
        </div>
    </div>
    
    <!-- Message Playback Overlay -->
    <div class="message-playback" id="message-playback">
        <div class="playback-content">
            <h2>MESSAGE FROM YOUR PAST SELF</h2>
            
            <div class="playback-panels">
                <div class="voice-playback-panel" id="voice-playback-panel" style="display: none;">
                    <div class="playback-panel-header">
                        <div class="playback-panel-title">
                            <i class="fas fa-microphone"></i> VOICE MESSAGE
                        </div>
                    </div>
                    <div class="voice-playback-controls">
                        <button id="voice-playback-btn" class="voice-playback-btn">
                            <i class="fas fa-play"></i>
                        </button>
                        <div class="voice-playback-status" id="voice-playback-status">Click to play your message</div>
                    </div>
                </div>
                
                <div class="text-playback-panel" id="text-playback-panel" style="display: none;">
                    <div class="playback-panel-header">
                        <div class="playback-panel-title">
                            <i class="fas fa-pen"></i> WRITTEN MESSAGE
                        </div>
                    </div>
                    <div class="message-display">
                        <div class="message-lines"></div>
                        <div id="message-text-display" class="message-text"></div>
                    </div>
                </div>
            </div>
            
            <div class="playback-actions">
                <button id="close-playback-btn" class="close-playback-btn">CLOSE</button>
            </div>
        </div>
    </div>
    
    <!-- Wake-Up Mode Overlay -->
    <div class="wakeup-mode" id="wakeup-mode">
        <div class="wakeup-content">
            <h2>WAKE-UP MODE: DESTROY THE LIES</h2>
            <div class="wakeup-intro">
                <div class="animated-text">you must break the pattern today or the loop will repeat tomorrow</div>
            </div>
            
            <div class="wakeup-tabs">
                <button class="tab-btn active" data-tab="truth">RAW TRUTH</button>
                <button class="tab-btn" data-tab="psychology">PSYCHOLOGY</button>
                <button class="tab-btn" data-tab="tactics">BREAK THE CYCLE</button>
                <button class="tab-btn" data-tab="science">SCIENCE</button>
            </div>
            
            <div class="tab-content active" id="truth-tab">
                <h3>THE INDUSTRY THAT FEEDS ON YOUR WEAKNESS</h3>
                <div class="truth-item interactive-item" id="truth1">
                    <h4>They Profit From Your Pain</h4>
                    <p>The porn industry makes billions by exploiting your biological vulnerabilities. They don't care about you - they care about your addiction and your money.</p>
                    <div class="interactive-content">
                        <p>The top porn sites generate more traffic than Netflix, Amazon, and Twitter combined. Your clicks are making them rich while destroying your life. Every view is a vote for this corrupt industry. The average porn user spends over 100 minutes per week consuming content. That's 5,200 minutes a year - 86 hours you'll never get back. Time you could have spent building a business, learning a skill, or connecting with real people.</p>
                    </div>
                </div>
                <div class="truth-item interactive-item" id="truth2">
                    <h4>It's Not "Free" - You're Paying With Your Life</h4>
                    <p>Every click costs you focus, motivation, relationships, and your future. The "free" content is bait to hook you into a lifetime of addiction.</p>
                    <div class="interactive-content">
                        <p>Studies show that porn addiction rewires your brain's reward system, making it harder to find satisfaction in real relationships and achievements. You're trading your potential for temporary pleasure. The dopamine hits you get from porn are artificial and unsustainable, leading to decreased motivation in other areas of life. Men who regularly consume porn report significantly lower levels of satisfaction with their partners, their careers, and their lives in general.</p>
                    </div>
                </div>
                <div class="truth-item interactive-item" id="truth3">
                    <h4>They're Engineering Your Addiction</h4>
                    <p>Algorithms, infinite scrolling, and increasingly extreme content are designed to hijack your brain's reward system. You're not choosing - you're being programmed.</p>
                    <div class="interactive-content">
                        <p>Porn sites use the same psychological tactics as slot machines - variable rewards, easy access, and escalating intensity. They've turned your brain against you. These platforms employ teams of psychologists and addiction specialists to maximize your engagement. The content becomes progressively more extreme because your brain develops tolerance, requiring stronger stimuli to achieve the same dopamine release. This is why many users find themselves consuming content they once found disturbing or even repulsive.</p>
                    </div>
                </div>
                <div class="truth-item interactive-item" id="truth4">
                    <h4>The Human Cost</h4>
                    <p>Behind every video are real people often exploited, trafficked, or coerced. Your consumption fuels an industry built on suffering.</p>
                    <div class="interactive-content">
                        <p>Countless performers have spoken out about the abuse, drug addiction, and trauma prevalent in the industry. Studies show that performers have higher rates of PTSD, depression, and substance abuse than the general population. The average career in porn lasts less than a year, with many performers leaving with physical injuries, psychological trauma, and limited career options. Your demand creates their supply of suffering. Every time you click, you're supporting an industry that profits from human exploitation.</p>
                    </div>
                </div>
                <div class="truth-item interactive-item" id="truth5">
                    <h4>The Global Impact</h4>
                    <p>Your addiction isn't just affecting you - it's contributing to a global epidemic that's destroying relationships, families, and societies.</p>
                    <div class="interactive-content">
                        <p>Porn consumption has been linked to increased rates of divorce, sexual dysfunction, and violence against women. Countries with higher rates of porn consumption report lower levels of gender equality and higher rates of sexual violence. The normalization of extreme sexual acts in porn has created unrealistic expectations that damage real-world relationships. Your private addiction has public consequences that ripple through society, affecting everyone you interact with.</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="psychology-tab">
                <h3>THE PSYCHOLOGY OF ENSLAVEMENT</h3>
                <div class="psychology-item interactive-item" id="psych1">
                    <h4>Dopamine Destruction</h4>
                    <p>Porn floods your brain with dopamine, overloading your reward system. Soon, normal pleasures don't satisfy you anymore. You need stronger hits just to feel normal.</p>
                    <div class="interactive-content">
                        <p>This dopamine overload causes downregulation - your brain reduces dopamine receptors to protect itself. The result? You feel less pleasure from everyday activities and become dependent on porn for any sense of satisfaction. This is why many addicts report feeling "flat" or "numb" when not consuming porn. Activities that once brought joy - hobbies, socializing, achievements - no longer trigger the same response. You've literally broken your brain's ability to experience natural pleasure.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="psych2">
                    <h4>The Shrinkage of Your Brain</h4>
                    <p>Studies show porn addiction physically shrinks the prefrontal cortex - the part of your brain responsible for willpower, decision-making, and moral judgment.</p>
                    <div class="interactive-content">
                        <p>Brain scans of porn addicts show reduced gray matter in regions critical for self-control. You're literally losing the brain matter needed to resist temptation and make good decisions. This shrinkage is directly correlated with the amount and duration of porn consumption. The more you consume, the more you damage your brain's executive function. This creates a vicious cycle: the more your brain shrinks, the less willpower you have to quit, leading to more consumption and further damage.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="psych3">
                    <h4>The Escalation Trap</h4>
                    <p>What excited you yesterday won't satisfy you tomorrow. The addiction demands more extreme content, warping your perception of sexuality and intimacy.</p>
                    <div class="interactive-content">
                        <p>This is called tolerance - your brain adapts to the stimulus, requiring more intense content to achieve the same dopamine release. Many users find themselves seeking content they once found disturbing or disgusting. This escalation isn't just about intensity - it often involves themes that become increasingly degrading, violent, or even illegal. Your sexuality is being hijacked and reshaped by an industry that profits from your degradation. What starts as "harmless" viewing can lead to places you never imagined yourself going.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="psych4">
                    <h4>The Social Isolation</h4>
                    <p>Addiction breeds shame, which breeds isolation. You withdraw from real relationships, making you more dependent on the very thing destroying you.</p>
                    <div class="interactive-content">
                        <p>This creates a vicious cycle: porn use  shame  isolation  loneliness  more porn use. Studies show porn users have less satisfying relationships and higher rates of depression and anxiety. The secrecy required to maintain your addiction creates walls between you and others. You become disconnected from authentic human connection, which further drives you back to artificial stimulation. Many addicts report feeling like they're "living a double life" - presenting one face to the world while hiding their secret shame.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="psych5">
                    <h4>The Performance Anxiety</h4>
                    <p>Porn creates unrealistic expectations about sex, bodies, and performance. This leads to anxiety, dysfunction, and dissatisfaction in real sexual encounters.</p>
                    <div class="interactive-content">
                        <p>Studies consistently show that men who consume more porn report higher rates of erectile dysfunction, difficulty reaching orgasm with partners, and overall sexual dissatisfaction. Your brain becomes conditioned to respond to artificial stimuli rather than real human connection. This conditioning is so powerful that many young men now experience "porn-induced erectile dysfunction" - they can achieve arousal with porn but not with real partners. You're literally training your body to fail in real sexual situations.</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="tactics-tab">
                <h3>WEAPONS TO DESTROY YOUR ADDICTION</h3>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic1">
                            The 90-Day Reset
                        </label>
                    </h4>
                    <p>Commit to 90 days of complete abstinence. This is the minimum time needed to rewire your brain's reward system and break the physical addiction.</p>
                    <div class="interactive-content">
                        <p>During this period, your brain's dopamine receptors will begin to normalize. You'll regain sensitivity to natural rewards and start breaking the neural pathways of addiction. Mark each day on a calendar to track your progress. The first 30 days will be the hardest as your brain protests the loss of its regular dopamine fix. Days 31-60 will show improvement as your brain chemistry begins to rebalance. Days 61-90 will solidify your new neural pathways. This isn't just about quitting porn - it's about resetting your entire relationship with pleasure, motivation, and reward.</p>
                    </div>
                </div>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic2">
                            The Cold Shower Protocol
                        </label>
                    </h4>
                    <p>When urges strike, take a 3-minute cold shower. The shock to your system immediately lowers dopamine levels and resets your mental state.</p>
                    <div class="interactive-content">
                        <p>Cold exposure triggers a flood of mood-boosting neurotransmitters and reduces inflammation. It's scientifically proven to increase willpower and break obsessive thought patterns. Make this your first line of defense against cravings. The discomfort of cold water creates a powerful interruption to the craving cycle. It forces your brain to focus on immediate physical sensations rather than fantasy. Over time, you'll build a conditioned response: urge  cold shower  mental clarity. This technique works because it leverages your body's physiological responses to override psychological cravings.</p>
                    </div>
                </div>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic3">
                            The Accountability Contract
                        </label>
                    </h4>
                    <p>Write a contract with yourself outlining the consequences of relapse. Sign it and give it to someone you trust. Public commitment increases success rates by 75%.</p>
                    <div class="interactive-content">
                        <p>Include specific penalties (e.g., donating to an organization you oppose, doing 100 pushups, etc.). The fear of social consequences activates different brain regions than willpower alone, giving you an additional defense against temptation. Choose an accountability partner who won't let you off the hook - someone who will call you out and hold you to your word. Schedule regular check-ins to discuss your progress. This external accountability creates a powerful psychological motivator that internal resolve alone cannot match.</p>
                    </div>
                </div>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic4">
                            The Replacement Strategy
                        </label>
                    </h4>
                    <p>Identify your trigger moments and create replacement rituals. Instead of porn, do 20 pushups, read 10 pages of a book, or call a friend.</p>
                    <div class="interactive-content">
                        <p>Neuroplasticity allows you to rewire your brain by creating new habits. When you consistently replace an old behavior with a new one, you weaken the old neural pathway while strengthening the new one. Be patient - this takes time but is incredibly effective. Create a list of your top 5 trigger situations (boredom, stress, loneliness, etc.) and assign a specific replacement activity for each. Practice these replacements even when you don't feel urges to build the neural pathways. Over time, the new behaviors will become automatic responses to the old triggers.</p>
                    </div>
                </div>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic5">
                            The Environment Purge
                        </label>
                    </h4>
                    <p>Ruthlessly eliminate all access points. Block sites, cancel subscriptions, remove devices from your bedroom. Make accessing porn harder than quitting.</p>
                    <div class="interactive-content">
                        <p>Your environment shapes your behavior more than willpower. By removing triggers and increasing friction, you reduce the cognitive load needed to resist temptation. Install blocking software on all devices and make your bedroom a sanctuary for sleep only. Tell your friends and family about your commitment so they can help you maintain a porn-free environment. The goal is to create a world where accessing porn requires significant effort and planning, giving you time to regain control before making a decision you'll regret.</p>
                    </div>
                </div>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic6">
                            The Physical Transformation
                        </label>
                    </h4>
                    <p>Start lifting weights, running, or engaging in intense physical exercise. Rebuilding your body rebuilds your mind and confidence.</p>
                    <div class="interactive-content">
                        <p>Physical exercise is one of the most effective ways to rebalance your brain chemistry and rebuild self-discipline. Weight training in particular increases testosterone, which improves focus, drive, and self-control. Cardiovascular exercise releases endorphins that naturally combat depression and anxiety. As you see physical changes in your body, you'll build confidence that translates to mental strength. Make exercise non-negotiable - schedule it like a business meeting you can't cancel. The discipline you build in the gym will transfer to every other area of your life.</p>
                    </div>
                </div>
                <div class="tactic-item">
                    <h4>
                        <label class="tactic-label">
                            <input type="checkbox" class="tactic-checkbox" id="tactic7">
                            The Purpose Project
                        </label>
                    </h4>
                    <p>Find a mission bigger than yourself. Start a business, learn a high-income skill, or dedicate yourself to a meaningful cause.</p>
                    <div class="interactive-content">
                        <p>Addiction thrives in emptiness. When you have a compelling purpose, you simply don't have time or mental space for porn. Identify what you're passionate about and commit to mastering it. Set ambitious goals that require your full attention and energy. As you build something meaningful, your self-worth will come from your achievements rather than temporary pleasures. This isn't just distraction - it's about replacing a destructive habit with a constructive one that builds your future instead of destroying it.</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="science-tab">
                <h3>THE SCIENCE OF ADDICTION AND RECOVERY</h3>
                <div class="psychology-item interactive-item" id="science1">
                    <h4>Neuroplasticity: Your Brain Can Heal</h4>
                    <p>Science confirms your brain can rewire itself. Neuroplasticity means you can create new neural pathways and weaken old ones.</p>
                    <div class="interactive-content">
                        <p>Every time you resist temptation, you strengthen the neural pathway for self-control. Every time you give in, you strengthen the addiction pathway. This is why consistency is crucial. Research shows that after 90 days of abstinence, the brain begins to show significant recovery in the prefrontal cortex - the region responsible for decision-making and impulse control. After 6 months, brain scans show nearly complete normalization of dopamine receptors. Your brain has an incredible capacity to heal, but it requires consistent action on your part.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="science2">
                    <h4>The Dopamine Fast: Reset Your Reward System</h4>
                    <p>Periodically abstaining from all high-dopamine activities (not just porn) can help reset your brain's reward sensitivity.</p>
                    <div class="interactive-content">
                        <p>A dopamine fast involves abstaining from porn, social media, junk food, video games, and other instant gratification sources for 24-48 hours. This practice helps your brain regain sensitivity to natural rewards. During a dopamine fast, you might feel bored or irritable initially - this is your brain protesting the lack of stimulation. By the end, you'll find simple pleasures more satisfying. Incorporate monthly dopamine fasts into your recovery plan to keep your reward system balanced and prevent new addictions from forming.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="science3">
                    <h4>The Role of Testosterone</h4>
                    <p>Porn addiction lowers testosterone levels, which affects motivation, confidence, and overall vitality.</p>
                    <div class="interactive-content">
                        <p>Studies show that men who quit porn experience a 15-20% increase in testosterone levels within just one week. This surge in testosterone improves mood, energy, focus, and drive - all essential for recovery. After 90 days of abstinence, testosterone levels typically return to optimal ranges. To accelerate this process, incorporate strength training, adequate sleep, and a nutrient-dense diet. Avoid xenoestrogens (chemicals that mimic estrogen) found in plastics and processed foods. Higher testosterone makes recovery easier by naturally increasing your motivation and willpower.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="science4">
                    <h4>The Science of Habit Formation</h4>
                    <p>Understanding how habits work gives you power to change them. Every habit follows a three-step loop: cue, routine, reward.</p>
                    <div class="interactive-content">
                        <p>To break a porn habit, identify your cues (triggers like boredom, stress, loneliness). Then replace the routine (viewing porn) with a healthier alternative that provides a similar reward. The key is finding a replacement that satisfies the same underlying need. If you use porn to escape stress, replace it with meditation or exercise. If you use it out of boredom, replace it with reading or learning a skill. By keeping the cue and reward but changing the routine, you can effectively rewire the habit loop. This approach is far more effective than simply trying to resist temptation through willpower alone.</p>
                    </div>
                </div>
                <div class="psychology-item interactive-item" id="science5">
                    <h4>The Window of Opportunity</h4>
                    <p>Science shows that the first 15 minutes of an urge is your critical window to take action before your rational brain is hijacked.</p>
                    <div class="interactive-content">
                        <p>When an urge strikes, your limbic system (emotional brain) activates, but your prefrontal cortex (rational brain) can still intervene for about 15 minutes. After this window, the emotional brain takes over, making rational decision-making nearly impossible. This is why immediate action is crucial. Have a pre-planned emergency response: when you feel an urge, immediately do 20 pushups, take a cold shower, or call your accountability partner. These actions engage your rational brain and prevent the emotional brain from hijacking your decision-making process. Mastering this 15-minute window is essential for long-term success.</p>
                    </div>
                </div>
            </div>
            
            <div class="wakeup-controls">
                <button id="exit-wakeup" class="exit-wakeup">I'M AWAKE NOW</button>
                <button id="take-action-btn" class="take-action-btn">TAKE ACTION</button>
            </div>
        </div>
    </div>
    
    <!-- User Account Modal -->
    <div class="user-modal" id="login-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-login-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2>WELCOME, KING</h2>
                <p>Create your account to begin your journey</p>
            </div>
            <div id="login-form">
                <div class="form-group">
                    <label for="login-username">Username</label>
                    <input type="text" id="login-username" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password">
                </div>
                <div class="modal-actions">
                    <button id="login-btn" class="save-message-btn">LOGIN</button>
                </div>
                <div class="switch-form">
                    Don't have an account? <a href="#" id="switch-to-signup">Sign Up</a>
                </div>
            </div>
            <div id="signup-form" style="display: none;">
                <div class="form-group">
                    <label for="signup-username">Username</label>
                    <input type="text" id="signup-username" placeholder="Choose a username">
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" placeholder="Choose a password">
                </div>
                <div class="form-group">
                    <label for="signup-confirm">Confirm Password</label>
                    <input type="password" id="signup-confirm" placeholder="Confirm your password">
                </div>
                <div class="modal-actions">
                    <button id="signup-btn" class="save-message-btn">CREATE ACCOUNT</button>
                </div>
                <div class="switch-form">
                    Already have an account? <a href="#" id="switch-to-login">Login</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="settings-modal" id="settings-modal">
        <div class="settings-content">
            <button class="modal-close" id="close-settings-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="settings-header">
                <h2>SETTINGS</h2>
            </div>
            
            <div class="settings-section">
                <h3>Notifications</h3>
                <div class="settings-item">
                    <div class="settings-label">Daily Reminders</div>
                    <div class="settings-control">
                        <div class="toggle-switch" id="daily-reminders-toggle"></div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Milestone Alerts</div>
                    <div class="settings-control">
                        <div class="toggle-switch active" id="milestone-alerts-toggle"></div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Motivational Messages</div>
                    <div class="settings-control">
                        <div class="toggle-switch active" id="motivational-messages-toggle"></div>
                    </div>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>Privacy</h3>
                <div class="settings-item">
                    <div class="settings-label">Save Data Locally</div>
                    <div class="settings-control">
                        <div class="toggle-switch active" id="save-data-toggle"></div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Clear All Data</div>
                    <div class="settings-control">
                        <button class="danger-btn" id="clear-data-btn">CLEAR</button>
                    </div>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>Account</h3>
                <div class="settings-item">
                    <div class="settings-label">Change Password</div>
                    <div class="settings-control">
                        <button id="change-password-btn">CHANGE</button>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Delete Account</div>
                    <div class="settings-control">
                        <button class="danger-btn" id="delete-account-btn">DELETE</button>
                    </div>
                </div>
            </div>
            
            <div class="settings-actions">
                <button id="save-settings-btn" class="save-message-btn">SAVE SETTINGS</button>
            </div>
        </div>
    </div>
    
    <!-- Statistics Modal -->
    <div class="stats-modal" id="stats-modal">
        <div class="stats-content">
            <button class="modal-close" id="close-stats-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="stats-header">
                <h2>YOUR PROGRESS</h2>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-days">0</div>
                    <div class="stat-label">Total Days</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="longest-streak">0</div>
                    <div class="stat-label">Longest Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="goals-completed">0</div>
                    <div class="stat-label">Goals Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="relapses">0</div>
                    <div class="stat-label">Relapses</div>
                </div>
            </div>
            
            <div class="stats-actions">
                <button id="export-stats-btn" class="save-message-btn">EXPORT STATS</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Hidden Audio for Breathing -->
    <audio id="breathe-audio" src="BREATHE AIR - AUDIO FROM JAYUZUMI.COM.mp3" preload="auto"></audio>
    
    <script>
        // Set current year
        document.getElementById('year').textContent = new Date().getFullYear();
        
        // DOM Elements
        const startBtn = document.getElementById('start-btn');
        const panicBtn = document.getElementById('panic-btn');
        const breatheBtn = document.getElementById('breathe-btn');
        const resetBtn = document.getElementById('reset-btn');
        const disciplinedModeBtn = document.getElementById('disciplined-mode-btn');
        const recordMessageBtn = document.getElementById('record-message-btn');
        const statsBtn = document.getElementById('stats-btn');
        const topWakeupBtn = document.getElementById('top-wakeup-btn');
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const currentStreakEl = document.getElementById('current-streak');
        const currentGoalEl = document.getElementById('current-goal');
        const nextGoalEl = document.getElementById('next-goal');
        const motivationTextEl = document.getElementById('motivation-text');
        const motivationEl = document.getElementById('motivation');
        const progressBarEl = document.getElementById('progress-bar');
        const completedEl = document.getElementById('completed');
        const redZoneEl = document.getElementById('red-zone');
        const redZoneTimerEl = document.getElementById('red-zone-timer');
        const redZoneMessageEl = document.getElementById('red-zone-message');
        const exitRedZoneBtn = document.getElementById('exit-red-zone');
        const playMessageBtn = document.getElementById('play-message-btn');
        const breathingExerciseEl = document.getElementById('breathing-exercise');
        const breathingCircleEl = document.getElementById('breathing-circle');
        const breathingInstructionsEl = document.getElementById('breathing-instructions');
        const exitBreathingBtn = document.getElementById('exit-breathing');
        const breathingModeSelect = document.getElementById('breathing-mode');
        const messageRecorderEl = document.getElementById('message-recorder');
        const recordBtn = document.getElementById('record-btn');
        const playVoiceBtn = document.getElementById('play-voice-btn');
        const voiceRecorderStatus = document.getElementById('voice-recorder-status');
        const voiceTimerEl = document.getElementById('voice-timer');
        const messageText = document.getElementById('message-text');
        const saveMessageBtn = document.getElementById('save-message-btn');
        const cancelRecordingBtn = document.getElementById('cancel-recording-btn');
        const messagePlaybackEl = document.getElementById('message-playback');
        const voicePlaybackPanel = document.getElementById('voice-playback-panel');
        const voicePlaybackBtn = document.getElementById('voice-playback-btn');
        const voicePlaybackStatus = document.getElementById('voice-playback-status');
        const textPlaybackPanel = document.getElementById('text-playback-panel');
        const messageTextDisplay = document.getElementById('message-text-display');
        const closePlaybackBtn = document.getElementById('close-playback-btn');
        const notificationEl = document.getElementById('notification');
        const mobileWarningEl = document.getElementById('mobile-warning');
        const breatheAudio = document.getElementById('breathe-audio');
        
        // User Account DOM Elements
        const userAccountEl = document.getElementById('user-account');
        const userAvatarEl = document.getElementById('user-avatar');
        const userNameEl = document.getElementById('user-name');
        const userStatsEl = document.getElementById('user-stats');
        const logoutBtn = document.getElementById('logout-btn');
        const settingsBtn = document.getElementById('settings-btn');
        const loginModalEl = document.getElementById('login-modal');
        const closeLoginModalBtn = document.getElementById('close-login-modal');
        const loginFormEl = document.getElementById('login-form');
        const signupFormEl = document.getElementById('signup-form');
        const loginUsernameEl = document.getElementById('login-username');
        const loginPasswordEl = document.getElementById('login-password');
        const loginBtn = document.getElementById('login-btn');
        const signupUsernameEl = document.getElementById('signup-username');
        const signupPasswordEl = document.getElementById('signup-password');
        const signupConfirmEl = document.getElementById('signup-confirm');
        const signupBtn = document.getElementById('signup-btn');
        const switchToSignupEl = document.getElementById('switch-to-signup');
        const switchToLoginEl = document.getElementById('switch-to-login');
        
        // Settings Modal DOM Elements
        const settingsModalEl = document.getElementById('settings-modal');
        const closeSettingsModalBtn = document.getElementById('close-settings-modal');
        const dailyRemindersToggle = document.getElementById('daily-reminders-toggle');
        const milestoneAlertsToggle = document.getElementById('milestone-alerts-toggle');
        const motivationalMessagesToggle = document.getElementById('motivational-messages-toggle');
        const saveDataToggle = document.getElementById('save-data-toggle');
        const clearDataBtn = document.getElementById('clear-data-btn');
        const changePasswordBtn = document.getElementById('change-password-btn');
        const deleteAccountBtn = document.getElementById('delete-account-btn');
        const saveSettingsBtn = document.getElementById('save-settings-btn');
        
        // Statistics Modal DOM Elements
        const statsModalEl = document.getElementById('stats-modal');
        const closeStatsModalBtn = document.getElementById('close-stats-modal');
        const totalDaysEl = document.getElementById('total-days');
        const longestStreakEl = document.getElementById('longest-streak');
        const goalsCompletedEl = document.getElementById('goals-completed');
        const relapsesEl = document.getElementById('relapses');
        const exportStatsBtn = document.getElementById('export-stats-btn');
        
        // Red Zone Distraction Exercise
        const mathProblemEl = document.getElementById('math-problem');
        const mathAnswerEl = document.getElementById('math-answer');
        const checkAnswerBtn = document.getElementById('check-answer');
        let currentMathAnswer = 0;
        
        // Wake-Up Mode DOM Elements
        const wakeupModeEl = document.getElementById('wakeup-mode');
        const exitWakeupBtn = document.getElementById('exit-wakeup');
        const takeActionBtn = document.getElementById('take-action-btn');
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const interactiveItems = document.querySelectorAll('.interactive-item');
        const tacticCheckboxes = document.querySelectorAll('.tactic-checkbox');
        
        // Motivational quotes
        const motivationalQuotes = [
            { text: "He who conquers himself is the mightiest warrior. Your mind is the battlefield.", author: "Confucius" },
            { text: "The unexamined life is not worth living. Question your desires, don't be enslaved by them.", author: "Socrates" },
            { text: "We are what we repeatedly do. Excellence, then, is not an act, but a habit.", author: "Aristotle" },
            { text: "The greatest glory in living lies not in never falling, but in rising every time we fall.", author: "Nelson Mandela" },
            { text: "Freedom is not worth having if it does not include the freedom to make mistakes.", author: "Mahatma Gandhi" },
            { text: "The only way to deal with an unfree world is to become so absolutely free that your very existence is an act of rebellion.", author: "Albert Camus" },
            { text: "He who has a why to live can bear almost any how. Find your purpose, not your pleasure.", author: "Friedrich Nietzsche" },
            { text: "The mind is everything. What you think you become. Control your thoughts, control your destiny.", author: "Buddha" },
            { text: "I count him braver who overcomes his desires than him who conquers his enemies.", author: "Aristotle" },
            { text: "The first and greatest victory is to conquer self. To be conquered by self is the worst shame.", author: "Plato" },
            { text: "Real men don't let temporary pleasures control their destiny. Start your journey to greatness now.", author: "The War Room" },
            { text: "Weakness is a choice. Strength is a habit. Which one are you choosing today?", author: "Tate Philosophy" },
            { text: "Every second you resist, you build your empire of self-discipline. Kings don't indulge in weakness.", author: "King's Mindset" },
            { text: "Your desire for instant gratification is what keeps you average. Break free and become legendary.", author: "Top G" },
            { text: "Pain is temporary, but regret lasts forever. Endure the pain of discipline or suffer the pain of regret.", author: "Hustler's University" },
            { text: "The modern world wants you weak, distracted, and complacent. Reject mediocrity. Embrace greatness.", author: "The Real World" },
            { text: "Your mind is the most powerful weapon you possess. Don't let it be hijacked by cheap dopamine hits.", author: "Tate Speech" },
            { text: "Every time you say no to weakness, you say yes to your future self. Build that future now.", author: "King's Code" },
            { text: "Excuses are for the weak. Solutions are for the strong. Which side are you on?", author: "War Room Tactics" },
            { text: "The path to greatness is paved with discipline, sacrifice, and unwavering focus. Start walking it now.", author: "Top G Mindset" }
        ];
        
        // Red Zone messages
        const redZoneMessages = [
            "IF YOU GIVE IN NOW, YOU'RE FAILING YOUR FUTURE SELF!",
            "EVERY TIME YOU RELAPSE, YOU PUSH SUCCESS FURTHER AWAY!",
            "THIS WEAKNESS WILL COST YOU YOUR DREAMS AND YOUR FAMILY!",
            "YOU'LL NEVER BE RICH IF YOU CAN'T CONTROL YOUR URGES!",
            "YOUR COMPETITORS ARE DISCIPLINED WHILE YOU'RE INDULGING!",
            "GIVE IN NOW AND YOU'RE CHOOSING MEDIOCRITY OVER GREATNESS!",
            "THIS MOMENT OF WEAKNESS COULD RUIN YOUR ENTIRE FUTURE!",
            "REAL MEN DON'T SURRENDER TO TEMPORARY PLEASURES!",
            "YOUR FUTURE FAMILY DESERVES A STRONG MAN, NOT A WEAK ONE!",
            "EVERY SECOND YOU RESIST BUILDS YOUR EMPIRE OF DISCIPLINE!"
        ];
        
        // Timer variables
        let timerInterval = null;
        let timeLeft = 48 * 60 * 60; // 48 hours in seconds
        let initialTime = 48 * 60 * 60; // 48 hours in seconds
        let streak = 0;
        let isRunning = false;
        let endTime = null;
        let disciplinedMode = false;
        
        // User Account variables
        let currentUser = null;
        let users = [];
        let settings = {
            dailyReminders: false,
            milestoneAlerts: true,
            motivationalMessages: true,
            saveData: true
        };
        
        // Statistics variables
        let stats = {
            totalDays: 0,
            longestStreak: 0,
            goalsCompleted: 0,
            relapses: 0
        };
        
        // Red Zone variables
        let redZoneInterval = null;
        let redZoneTimeLeft = 300; // 5 minutes in seconds
        let redZoneMessageInterval = null;
        
        // Breathing exercise variables
        let breathingInterval = null;
        let breathingStep = 0; // 0: inhale, 1: hold, 2: exhale
        let breathingTimeLeft = 4; // Start with inhale time
        let breathingMode = 'box'; // default breathing mode
        
        // Message recording variables
        let mediaRecorder = null;
        let audioChunks = [];
        let recordedAudio = null;
        let recordingTimer = null;
        let recordingSeconds = 0;
        let savedMessage = {
            voice: null,
            text: null
        };
        
        // Notification variables
        let notificationPermission = false;
        let dailyReminderInterval = null;
        let motivationalMessageInterval = null;
        
        // Initialize app
        function init() {
            // Load saved data from localStorage
            loadData();
            
            // Check if user is logged in
            if (!currentUser) {
                showLoginModal();
            } else {
                updateUserAccountDisplay();
            }
            
            // Update display with loaded data
            updateDisplay();
            updateStreakInfo();
            updateDisciplinedMode();
            updateSettingsToggles();
            
            // Check if timer was running when page was last closed
            if (endTime && endTime > Date.now()) {
                startTimer();
                isRunning = true;
                startBtn.textContent = "MISSION IN PROGRESS";
                startBtn.disabled = true;
            } else if (endTime && endTime <= Date.now()) {
                // Timer has expired, complete the goal
                completeGoal();
            }
            
            // Start quote rotation
            startQuoteRotation();
            
            // Request notification permission
            requestNotificationPermission();
            
            // Check if mobile device
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                mobileWarningEl.style.display = 'block';
            }
            
            // Start daily reminders if enabled
            if (settings.dailyReminders) {
                startDailyReminders();
            }
            
            // Start motivational messages if enabled
            if (settings.motivationalMessages) {
                startMotivationalMessages();
            }
        }
        
        // Load data from localStorage
        function loadData() {
            try {
                // Load users
                const savedUsers = localStorage.getItem('kingUsers');
                if (savedUsers) {
                    users = JSON.parse(savedUsers);
                }
                
                // Load current user
                const savedCurrentUser = localStorage.getItem('kingCurrentUser');
                if (savedCurrentUser) {
                    currentUser = JSON.parse(savedCurrentUser);
                }
                
                // Load user data
                if (currentUser) {
                    const userData = localStorage.getItem(`kingUserData_${currentUser.username}`);
                    if (userData) {
                        const data = JSON.parse(userData);
                        streak = data.streak || 0;
                        initialTime = data.initialTime || 48 * 60 * 60;
                        timeLeft = data.timeLeft || 48 * 60 * 60;
                        endTime = data.endTime || null;
                        disciplinedMode = data.disciplinedMode || false;
                        stats = data.stats || {
                            totalDays: 0,
                            longestStreak: 0,
                            goalsCompleted: 0,
                            relapses: 0
                        };
                        
                        // Load saved message if available
                        if (data.savedMessage) {
                            savedMessage = data.savedMessage;
                        }
                        
                        // If we have an end time, calculate the current timeLeft
                        if (endTime) {
                            const now = Date.now();
                            if (now < endTime) {
                                timeLeft = Math.floor((endTime - now) / 1000);
                            } else {
                                // If the timer has expired, trigger completion
                                timeLeft = 0;
                            }
                        }
                    }
                }
                
                // Load settings
                const savedSettings = localStorage.getItem('kingSettings');
                if (savedSettings) {
                    settings = JSON.parse(savedSettings);
                }
            } catch (e) {
                console.error('Error loading data from localStorage:', e);
            }
        }
        
        // Save data to localStorage
        function saveData() {
            try {
                // Save users
                localStorage.setItem('kingUsers', JSON.stringify(users));
                
                // Save current user
                if (currentUser) {
                    localStorage.setItem('kingCurrentUser', JSON.stringify(currentUser));
                    
                    // Save user data
                    const data = {
                        streak,
                        initialTime,
                        timeLeft,
                        endTime,
                        disciplinedMode,
                        stats,
                        savedMessage
                    };
                    localStorage.setItem(`kingUserData_${currentUser.username}`, JSON.stringify(data));
                }
                
                // Save settings
                localStorage.setItem('kingSettings', JSON.stringify(settings));
            } catch (e) {
                console.error('Error saving data to localStorage:', e);
            }
        }
        
        // Update display
        function updateDisplay() {
            const days = Math.floor(timeLeft / (24 * 60 * 60));
            const hours = Math.floor((timeLeft % (24 * 60 * 60)) / (60 * 60));
            const minutes = Math.floor((timeLeft % (60 * 60)) / 60);
            const seconds = timeLeft % 60;
            
            daysEl.textContent = days.toString().padStart(2, '0');
            hoursEl.textContent = hours.toString().padStart(2, '0');
            minutesEl.textContent = minutes.toString().padStart(2, '0');
            secondsEl.textContent = seconds.toString().padStart(2, '0');
            
            // Update progress bar
            const progress = ((initialTime - timeLeft) / initialTime) * 100;
            progressBarEl.style.width = `${progress}%`;
            
            // Update motivation based on time left
            if (timeLeft < 60 * 60) {
                updateMotivation("The final hour is where legends are made. Don't you dare give up now.", "Top G");
            } else if (timeLeft < 24 * 60 * 60) {
                updateMotivation("You're in the final stretch. Push through the pain and claim your victory.", "King's Mindset");
            }
            
            // Update user stats
            if (currentUser) {
                const currentDay = Math.floor((initialTime - timeLeft) / (24 * 60 * 60)) + 1;
                userStatsEl.textContent = `Day ${currentDay}`;
            }
            
            // Save current state
            saveData();
        }
        
        // Update streak info
        function updateStreakInfo() {
            currentStreakEl.textContent = streak;
            currentGoalEl.textContent = `${Math.floor(initialTime / (60 * 60))}h`;
            nextGoalEl.textContent = `${Math.floor((initialTime * 2) / (60 * 60))}h`;
        }
        
        // Update motivation
        function updateMotivation(text, author) {
            motivationTextEl.textContent = text;
            document.querySelector('.motivation .author').textContent = `- ${author}`;
        }
        
        // Get random motivation
        function getRandomMotivation() {
            const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
            updateMotivation(quote.text, quote.author);
        }
        
        // Start timer
        function startTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Set the end time for the current countdown
            endTime = Date.now() + (timeLeft * 1000);
            saveData();
            
            timerInterval = setInterval(() => {
                const now = Date.now();
                
                // Calculate remaining time in seconds
                if (now < endTime) {
                    timeLeft = Math.floor((endTime - now) / 1000);
                    updateDisplay();
                } else {
                    // Timer has completed
                    timeLeft = 0;
                    updateDisplay();
                    completeGoal();
                }
            }, 1000);
        }
        
        // Start mission
        function startMission() {
            if (isRunning) return;
            
            isRunning = true;
            
            // Reset to initial values
            streak = 0;
            initialTime = 48 * 60 * 60;
            timeLeft = initialTime;
            
            startBtn.textContent = "MISSION IN PROGRESS";
            startBtn.disabled = true;
            
            showNotification("Mission started! Stay strong, King.");
            
            updateStreakInfo();
            startTimer();
            saveData();
        }
        
        // Complete goal
        function completeGoal() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            streak++;
            initialTime *= 2;
            timeLeft = initialTime;
            
            // Update statistics
            stats.goalsCompleted++;
            stats.totalDays += Math.floor(initialTime / (24 * 60 * 60));
            if (streak > stats.longestStreak) {
                stats.longestStreak = streak;
            }
            
            // Reset end time
            endTime = null;
            
            updateDisplay();
            updateStreakInfo();
            updateStatistics();
            
            // Show completion message
            completedEl.style.display = 'block';
            setTimeout(() => {
                completedEl.style.display = 'none';
            }, 3000);
            
            showNotification("Mission accomplished! You're becoming stronger.");
            
            // Send milestone notification if enabled
            if (settings.milestoneAlerts && notificationPermission) {
                sendNotification("Mission Accomplished!", "You've completed another goal. Keep pushing forward!");
            }
            
            // Update motivation
            const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
            updateMotivation(quote.text, quote.author);
            
            // Save data
            saveData();
            
            // Start timer for next goal
            startTimer();
        }
        
        // Reset streak
        function resetStreak() {
            if (confirm("Are you sure you want to reset your streak? This is a sign of weakness.")) {
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                // Update statistics
                stats.relapses++;
                
                timeLeft = 48 * 60 * 60;
                initialTime = 48 * 60 * 60;
                streak = 0;
                isRunning = false;
                endTime = null;
                
                startBtn.textContent = "START MISSION";
                startBtn.disabled = false;
                
                updateDisplay();
                updateStreakInfo();
                updateStatistics();
                
                updateMotivation("Failure is not final, but giving up is. Get back on your feet and fight for your greatness.", "Tate Philosophy");
                showNotification("Streak reset. Time to start over and prove your strength.");
                
                // Save reset data
                saveData();
            }
        }
        
        // Toggle Disciplined Mode
        function toggleDisciplinedMode() {
            disciplinedMode = !disciplinedMode;
            updateDisciplinedMode();
            saveData();
            
            if (disciplinedMode) {
                showNotification("Disciplined Mode activated. Focus on your journey, not the timer.");
            } else {
                showNotification("Disciplined Mode deactivated. Timer and progress are now visible.");
            }
        }
        
        // Update Disciplined Mode display
        function updateDisciplinedMode() {
            if (disciplinedMode) {
                document.body.classList.add('disciplined-mode');
                disciplinedModeBtn.classList.add('active');
                disciplinedModeBtn.textContent = "DISCIPLINED MODE: ON";
            } else {
                document.body.classList.remove('disciplined-mode');
                disciplinedModeBtn.classList.remove('active');
                disciplinedModeBtn.textContent = "DISCIPLINED MODE";
            }
        }
        
        // Show notification
        function showNotification(message) {
            notificationEl.textContent = message;
            notificationEl.classList.add('show');
            
            setTimeout(() => {
                notificationEl.classList.remove('show');
            }, 3000);
        }
        
        // Request notification permission
        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    notificationPermission = permission === 'granted';
                });
            }
        }
        
        // Send browser notification
        function sendNotification(title, body) {
            if (notificationPermission && 'Notification' in window) {
                new Notification(title, {
                    body: body,
                    icon: 'https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80'
                });
            }
        }
        
        // Start daily reminders
        function startDailyReminders() {
            if (dailyReminderInterval) {
                clearInterval(dailyReminderInterval);
            }
            
            // Send reminder at 9 AM every day
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(9, 0, 0, 0);
            
            const timeUntilTomorrow = tomorrow - now;
            
            dailyReminderInterval = setTimeout(() => {
                if (settings.dailyReminders && notificationPermission) {
                    sendNotification("Daily Reminder", "Stay strong today! Every day without porn is a victory.");
                }
                
                // Set up recurring daily reminders
                setInterval(() => {
                    if (settings.dailyReminders && notificationPermission) {
                        sendNotification("Daily Reminder", "Stay strong today! Every day without porn is a victory.");
                    }
                }, 24 * 60 * 60 * 1000); // 24 hours
            }, timeUntilTomorrow);
        }
        
        // Start motivational messages
        function startMotivationalMessages() {
            if (motivationalMessageInterval) {
                clearInterval(motivationalMessageInterval);
            }
            
            // Send motivational message every 4 hours
            motivationalMessageInterval = setInterval(() => {
                if (settings.motivationalMessages && notificationPermission) {
                    const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
                    sendNotification("Motivational Message", `${quote.text} - ${quote.author}`);
                }
            }, 4 * 60 * 60 * 1000); // 4 hours
        }
        
        // Red Zone functions
        function activateRedZone() {
            redZoneEl.classList.add('active');
            redZoneTimeLeft = 300; // 5 minutes
            updateRedZoneTimer();
            
            // Generate math problem
            generateMathProblem();
            
            // Show play message button if there's a saved message
            if (savedMessage.voice || savedMessage.text) {
                playMessageBtn.style.display = 'block';
            } else {
                playMessageBtn.style.display = 'none';
            }
            
            // Start countdown
            redZoneInterval = setInterval(() => {
                redZoneTimeLeft--;
                updateRedZoneTimer();
                
                if (redZoneTimeLeft <= 0) {
                    exitRedZone();
                }
            }, 1000);
            
            // Start message cycling
            cycleRedZoneMessages();
            redZoneMessageInterval = setInterval(cycleRedZoneMessages, 3000);
            
            showNotification("Red Zone activated! Fight the urge!");
        }
        
        function updateRedZoneTimer() {
            const minutes = Math.floor(redZoneTimeLeft / 60);
            const seconds = redZoneTimeLeft % 60;
            redZoneTimerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function cycleRedZoneMessages() {
            const message = redZoneMessages[Math.floor(Math.random() * redZoneMessages.length)];
            redZoneMessageEl.textContent = message;
        }
        
        function exitRedZone() {
            redZoneEl.classList.remove('active');
            clearInterval(redZoneInterval);
            clearInterval(redZoneMessageInterval);
            showNotification("You conquered the urge! Stay strong.");
        }
        
        // Generate math problem for distraction
        function generateMathProblem() {
            const operations = ['+', '-', ''];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            let num1, num2, answer;
            
            switch (operation) {
                case '+':
                    num1 = Math.floor(Math.random() * 50) + 1;
                    num2 = Math.floor(Math.random() * 50) + 1;
                    answer = num1 + num2;
                    break;
                case '-':
                    num1 = Math.floor(Math.random() * 50) + 20;
                    num2 = Math.floor(Math.random() * 20) + 1;
                    answer = num1 - num2;
                    break;
                case '':
                    num1 = Math.floor(Math.random() * 12) + 1;
                    num2 = Math.floor(Math.random() * 12) + 1;
                    answer = num1 * num2;
                    break;
            }
            
            mathProblemEl.textContent = `${num1} ${operation} ${num2} = ?`;
            currentMathAnswer = answer;
            mathAnswerEl.value = '';
        }
        
        function checkMathAnswer() {
            const userAnswer = parseInt(mathAnswerEl.value);
            if (userAnswer === currentMathAnswer) {
                showNotification("Correct! You're regaining control.");
                generateMathProblem();
            } else {
                showNotification("Try again. Focus!");
                mathAnswerEl.value = '';
                mathAnswerEl.focus();
            }
        }
        
        // Breathing exercise functions
        function getBreathingTimes() {
            switch (breathingMode) {
                case 'box':
                    return { inhale: 4, hold: 4, exhale: 4 };
                case 'wim-hof':
                    return { inhale: 30, hold: 15, exhale: 15 };
                case '4-7-8':
                    return { inhale: 4, hold: 7, exhale: 8 };
                case 'coherent':
                    return { inhale: 5, hold: 0, exhale: 5 };
                case 'resonance':
                    return { inhale: 6, hold: 0, exhale: 6 };
                default:
                    return { inhale: 4, hold: 4, exhale: 4 };
            }
        }
        
        function startBreathingExercise() {
            breathingMode = breathingModeSelect.value;
            breathingExerciseEl.classList.add('active');
            breathingStep = 0;
            const times = getBreathingTimes();
            breathingTimeLeft = times.inhale;
            updateBreathingDisplay();
            
            // Play the breathing audio if available
            if (breatheAudio) {
                breatheAudio.play().catch(e => console.log("Audio play failed:", e));
            }
            
            breathingInterval = setInterval(() => {
                breathingTimeLeft--;
                
                if (breathingTimeLeft <= 0) {
                    breathingStep = (breathingStep + 1) % 3;
                    const times = getBreathingTimes();
                    
                    if (breathingStep === 0) {
                        breathingTimeLeft = times.inhale;
                    } else if (breathingStep === 1) {
                        breathingTimeLeft = times.hold;
                    } else {
                        breathingTimeLeft = times.exhale;
                    }
                }
                
                updateBreathingDisplay();
            }, 1000);
            
            showNotification("Breathing exercise started. Focus on your breath.");
        }
        
        function updateBreathingDisplay() {
            const times = getBreathingTimes();
            breathingCircleEl.className = 'breathing-circle';
            
            if (breathingStep === 0) {
                breathingCircleEl.classList.add('inhale');
                breathingCircleEl.textContent = 'INHALE';
                breathingInstructionsEl.textContent = `Take a deep breath in through your nose for ${times.inhale} seconds`;
            } else if (breathingStep === 1) {
                if (times.hold > 0) {
                    breathingCircleEl.classList.add('hold');
                    breathingCircleEl.textContent = 'HOLD';
                    breathingInstructionsEl.textContent = `Hold your breath for ${times.hold} seconds`;
                } else {
                    // Skip hold step if time is 0
                    breathingStep = 2;
                    breathingTimeLeft = times.exhale;
                    updateBreathingDisplay();
                    return;
                }
            } else {
                breathingCircleEl.classList.add('exhale');
                breathingCircleEl.textContent = 'EXHALE';
                breathingInstructionsEl.textContent = `Exhale slowly through your mouth for ${times.exhale} seconds`;
            }
        }
        
        function exitBreathingExercise() {
            breathingExerciseEl.classList.remove('active');
            clearInterval(breathingInterval);
            
            // Pause and reset the breathing audio
            if (breatheAudio) {
                breatheAudio.pause();
                breatheAudio.currentTime = 0;
            }
            
            showNotification("Breathing exercise completed. You're in control.");
        }
        
        // Message recording functions
        function openMessageRecorder() {
            messageRecorderEl.classList.add('active');
            
            // Reset recorder state
            audioChunks = [];
            recordedAudio = null;
            mediaRecorder = null;
            recordingSeconds = 0;
            
            // Reset UI
            recordBtn.classList.remove('recording');
            recordBtn.innerHTML = '<i class="fas fa-microphone"></i>';
            playVoiceBtn.style.display = 'none';
            voiceRecorderStatus.textContent = 'Click the microphone to start recording';
            voiceTimerEl.textContent = '00:00';
            voiceTimerEl.classList.remove('active');
            messageText.value = '';
        }
        
        function closeMessageRecorder() {
            messageRecorderEl.classList.remove('active');
        }
        
        // Format time for display
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Update recording timer
        function updateRecordingTimer() {
            recordingSeconds++;
            voiceTimerEl.textContent = formatTime(recordingSeconds);
        }
        
        async function startRecording() {
            try {
                // Check if mediaRecorder is already recording
                if (mediaRecorder && mediaRecorder.state === 'recording') {
                    stopRecording();
                    return;
                }
                
                // Request access to the microphone
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        autoGainControl: true
                    } 
                });
                
                // Create a new MediaRecorder instance
                mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'audio/webm;codecs=opus'
                });
                
                audioChunks = [];
                
                mediaRecorder.ondataavailable = (event) => {
                    audioChunks.push(event.data);
                };
                
                mediaRecorder.onstop = () => {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                    recordedAudio = URL.createObjectURL(audioBlob);
                    
                    // Show play button
                    playVoiceBtn.style.display = 'block';
                    voiceRecorderStatus.textContent = 'Recording complete. Click play to review.';
                    voiceTimerEl.classList.remove('active');
                    
                    // Stop all tracks
                    stream.getTracks().forEach(track => track.stop());
                };
                
                mediaRecorder.onerror = (event) => {
                    console.error('MediaRecorder error:', event.error);
                    voiceRecorderStatus.textContent = 'Error: Recording failed. Please try again.';
                    recordBtn.classList.remove('recording');
                    recordBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                };
                
                // Start recording
                mediaRecorder.start();
                
                // Update UI
                recordBtn.classList.add('recording');
                recordBtn.innerHTML = '<i class="fas fa-stop"></i>';
                voiceRecorderStatus.textContent = 'Recording... Click to stop';
                
                // Start timer
                voiceTimerEl.classList.add('active');
                recordingTimer = setInterval(updateRecordingTimer, 1000);
                
            } catch (err) {
                console.error('Error accessing microphone:', err);
                let errorMessage = 'Error: Could not access microphone. ';
                
                if (err.name === 'NotAllowedError') {
                    errorMessage += 'Please allow microphone access and try again.';
                } else if (err.name === 'NotFoundError') {
                    errorMessage += 'No microphone found. Please connect a microphone and try again.';
                } else {
                    errorMessage += 'Please check your device settings and try again.';
                }
                
                voiceRecorderStatus.textContent = errorMessage;
            }
        }
        
        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                
                // Clear timer
                if (recordingTimer) {
                    clearInterval(recordingTimer);
                    recordingTimer = null;
                }
                
                // Update UI
                recordBtn.classList.remove('recording');
                recordBtn.innerHTML = '<i class="fas fa-microphone"></i>';
            }
        }
        
        function playRecordedAudio() {
            if (recordedAudio) {
                const audio = new Audio(recordedAudio);
                
                // Update UI
                playVoiceBtn.innerHTML = '<i class="fas fa-pause"></i>';
                voiceRecorderStatus.textContent = 'Playing recording...';
                
                audio.onended = () => {
                    playVoiceBtn.innerHTML = '<i class="fas fa-play"></i> PLAY RECORDING';
                    voiceRecorderStatus.textContent = 'Recording complete. Click play to review.';
                };
                
                audio.play();
            }
        }
        
        function saveMessage() {
            // Check if at least one type of message is recorded
            if (!recordedAudio && !messageText.value.trim()) {
                showNotification('Please record a voice message or write a text message before saving.');
                return;
            }
            
            // Save voice message if available
            if (recordedAudio) {
                // Convert blob URL to base64 for storage
                fetch(recordedAudio)
                    .then(response => response.blob())
                    .then(blob => {
                        const reader = new FileReader();
                        reader.onloadend = () => {
                            savedMessage.voice = reader.result;
                            
                            // Save text message if available
                            if (messageText.value.trim()) {
                                savedMessage.text = messageText.value;
                            }
                            
                            saveData();
                            showNotification('Message saved successfully!');
                            closeMessageRecorder();
                        };
                        reader.readAsDataURL(blob);
                    })
                    .catch(err => {
                        console.error('Error processing audio:', err);
                        showNotification('Error saving message. Please try again.');
                    });
            } else if (messageText.value.trim()) {
                // Only text message is available
                savedMessage.text = messageText.value;
                saveData();
                showNotification('Message saved successfully!');
                closeMessageRecorder();
            }
        }
        
        function playSavedMessage() {
            if (!savedMessage.voice && !savedMessage.text) {
                showNotification('No saved message found.');
                return;
            }
            
            messagePlaybackEl.classList.add('active');
            
            // Show/hide panels based on what's available
            if (savedMessage.voice) {
                voicePlaybackPanel.style.display = 'block';
                
                // Create audio element from base64
                const audio = new Audio(savedMessage.voice);
                
                voicePlaybackBtn.onclick = () => {
                    if (audio.paused) {
                        audio.play();
                        voicePlaybackBtn.innerHTML = '<i class="fas fa-pause"></i>';
                        voicePlaybackStatus.textContent = 'Playing message...';
                        
                        audio.onended = () => {
                            voicePlaybackBtn.innerHTML = '<i class="fas fa-play"></i>';
                            voicePlaybackStatus.textContent = 'Click to play your message';
                        };
                    } else {
                        audio.pause();
                        voicePlaybackBtn.innerHTML = '<i class="fas fa-play"></i>';
                        voicePlaybackStatus.textContent = 'Click to play your message';
                    }
                };
            } else {
                voicePlaybackPanel.style.display = 'none';
            }
            
            if (savedMessage.text) {
                textPlaybackPanel.style.display = 'block';
                messageTextDisplay.textContent = savedMessage.text;
            } else {
                textPlaybackPanel.style.display = 'none';
            }
        }
        
        function closeMessagePlayback() {
            messagePlaybackEl.classList.remove('active');
            
            // Reset audio playback
            if (voicePlaybackBtn) {
                voicePlaybackBtn.innerHTML = '<i class="fas fa-play"></i>';
                voicePlaybackStatus.textContent = 'Click to play your message';
            }
        }
        
        // User Account functions
        function showLoginModal() {
            loginModalEl.classList.add('active');
        }
        
        function hideLoginModal() {
            loginModalEl.classList.remove('active');
        }
        
        function switchToSignup() {
            loginFormEl.style.display = 'none';
            signupFormEl.style.display = 'block';
        }
        
        function switchToLogin() {
            loginFormEl.style.display = 'block';
            signupFormEl.style.display = 'none';
        }
        
        function login() {
            const username = loginUsernameEl.value.trim();
            const password = loginPasswordEl.value.trim();
            
            if (!username || !password) {
                showNotification('Please enter both username and password.');
                return;
            }
            
            // Find user
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                saveData();
                updateUserAccountDisplay();
                hideLoginModal();
                showNotification('Login successful! Welcome back.');
            } else {
                showNotification('Invalid username or password.');
            }
        }
        
        function signup() {
            const username = signupUsernameEl.value.trim();
            const password = signupPasswordEl.value.trim();
            const confirm = signupConfirmEl.value.trim();
            
            if (!username || !password || !confirm) {
                showNotification('Please fill in all fields.');
                return;
            }
            
            if (password !== confirm) {
                showNotification('Passwords do not match.');
                return;
            }
            
            // Check if username already exists
            if (users.some(u => u.username === username)) {
                showNotification('Username already exists.');
                return;
            }
            
            // Create new user
            const newUser = {
                username,
                password,
                createdAt: new Date().toISOString()
            };
            
            users.push(newUser);
            currentUser = newUser;
            
            // Initialize user data
            const userData = {
                streak: 0,
                initialTime: 48 * 60 * 60,
                timeLeft: 48 * 60 * 60,
                endTime: null,
                disciplinedMode: false,
                stats: {
                    totalDays: 0,
                    longestStreak: 0,
                    goalsCompleted: 0,
                    relapses: 0
                },
                savedMessage: {
                    voice: null,
                    text: null
                }
            };
            
            localStorage.setItem(`kingUserData_${username}`, JSON.stringify(userData));
            
            saveData();
            updateUserAccountDisplay();
            hideLoginModal();
            showNotification('Account created successfully! Welcome to the journey.');
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('kingCurrentUser');
            userAccountEl.style.display = 'none';
            showLoginModal();
            showNotification('You have been logged out.');
        }
        
        function updateUserAccountDisplay() {
            if (currentUser) {
                userAccountEl.style.display = 'flex';
                userAvatarEl.textContent = currentUser.username.charAt(0).toUpperCase();
                userNameEl.textContent = currentUser.username;
                
                // Calculate current day
                const currentDay = Math.floor((initialTime - timeLeft) / (24 * 60 * 60)) + 1;
                userStatsEl.textContent = `Day ${currentDay}`;
            } else {
                userAccountEl.style.display = 'none';
            }
        }
        
        // Settings functions
        function showSettingsModal() {
            settingsModalEl.classList.add('active');
        }
        
        function hideSettingsModal() {
            settingsModalEl.classList.remove('active');
        }
        
        function updateSettingsToggles() {
            dailyRemindersToggle.classList.toggle('active', settings.dailyReminders);
            milestoneAlertsToggle.classList.toggle('active', settings.milestoneAlerts);
            motivationalMessagesToggle.classList.toggle('active', settings.motivationalMessages);
            saveDataToggle.classList.toggle('active', settings.saveData);
        }
        
        function toggleSetting(toggleElement, settingName) {
            toggleElement.classList.toggle('active');
            settings[settingName] = toggleElement.classList.contains('active');
            
            // Apply setting changes
            if (settingName === 'dailyReminders') {
                if (settings.dailyReminders) {
                    startDailyReminders();
                } else if (dailyReminderInterval) {
                    clearInterval(dailyReminderInterval);
                    dailyReminderInterval = null;
                }
            } else if (settingName === 'motivationalMessages') {
                if (settings.motivationalMessages) {
                    startMotivationalMessages();
                } else if (motivationalMessageInterval) {
                    clearInterval(motivationalMessageInterval);
                    motivationalMessageInterval = null;
                }
            }
        }
        
        function saveSettings() {
            saveData();
            hideSettingsModal();
            showNotification('Settings saved successfully.');
        }
        
        function clearData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                // Clear user data
                if (currentUser) {
                    localStorage.removeItem(`kingUserData_${currentUser.username}`);
                }
                
                // Reset all data
                streak = 0;
                initialTime = 48 * 60 * 60;
                timeLeft = 48 * 60 * 60;
                endTime = null;
                disciplinedMode = false;
                stats = {
                    totalDays: 0,
                    longestStreak: 0,
                    goalsCompleted: 0,
                    relapses: 0
                };
                savedMessage = {
                    voice: null,
                    text: null
                };
                
                // Stop timer if running
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
                
                isRunning = false;
                startBtn.textContent = "START MISSION";
                startBtn.disabled = false;
                
                updateDisplay();
                updateStreakInfo();
                updateStatistics();
                
                showNotification('All data has been cleared.');
            }
        }
        
        function changePassword() {
            const newPassword = prompt('Enter your new password:');
            if (newPassword) {
                // Find and update user
                const userIndex = users.findIndex(u => u.username === currentUser.username);
                if (userIndex !== -1) {
                    users[userIndex].password = newPassword;
                    saveData();
                    showNotification('Password changed successfully.');
                }
            }
        }
        
        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This cannot be undone.')) {
                // Remove user from users array
                users = users.filter(u => u.username !== currentUser.username);
                
                // Remove user data
                localStorage.removeItem(`kingUserData_${currentUser.username}`);
                
                // Logout
                logout();
                
                showNotification('Your account has been deleted.');
            }
        }
        
        // Statistics functions
        function showStatisticsModal() {
            updateStatistics();
            statsModalEl.classList.add('active');
        }
        
        function hideStatisticsModal() {
            statsModalEl.classList.remove('active');
        }
        
        function updateStatistics() {
            // Calculate total days
            if (isRunning) {
                const currentDay = Math.floor((initialTime - timeLeft) / (24 * 60 * 60)) + 1;
                stats.totalDays = Math.max(stats.totalDays, currentDay);
            }
            
            // Update display
            totalDaysEl.textContent = stats.totalDays;
            longestStreakEl.textContent = stats.longestStreak;
            goalsCompletedEl.textContent = stats.goalsCompleted;
            relapsesEl.textContent = stats.relapses;
        }
        
        function exportStats() {
            const statsData = {
                username: currentUser.username,
                stats: stats,
                currentStreak: streak,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(statsData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `king-stats-${currentUser.username}-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Statistics exported successfully.');
        }
        
        // Wake-Up Mode Functions
        function activateWakeupMode() {
            wakeupModeEl.classList.add('active');
            showNotification("Wake-Up Mode activated. Prepare to face the truth.");
        }
        
        function exitWakeupMode() {
            wakeupModeEl.classList.remove('active');
            showNotification("You're awake. Now stay awake.");
        }
        
        function takeAction() {
            // Find current active tab
            const activeTab = document.querySelector('.tab-btn.active');
            const currentTabId = activeTab.getAttribute('data-tab');
            
            if (currentTabId === 'truth') {
                // Move to psychology tab
                document.querySelector('[data-tab="psychology"]').click();
                showNotification("Understanding the psychology is the next step.");
            } else if (currentTabId === 'psychology') {
                // Move to tactics tab
                document.querySelector('[data-tab="tactics"]').click();
                showNotification("Now it's time to break the cycle with these tactics.");
            } else if (currentTabId === 'tactics') {
                // Move to science tab
                document.querySelector('[data-tab="science"]').click();
                showNotification("Understanding the science will strengthen your resolve.");
            } else {
                // All tabs completed, close Wake-Up Mode
                exitWakeupMode();
                showNotification("You've completed Wake-Up Mode. Stay vigilant!");
            }
        }
        
        // Event listeners
        startBtn.addEventListener('click', startMission);
        resetBtn.addEventListener('click', resetStreak);
        panicBtn.addEventListener('click', activateRedZone);
        exitRedZoneBtn.addEventListener('click', exitRedZone);
        breatheBtn.addEventListener('click', startBreathingExercise);
        exitBreathingBtn.addEventListener('click', exitBreathingExercise);
        motivationEl.addEventListener('click', getRandomMotivation);
        disciplinedModeBtn.addEventListener('click', toggleDisciplinedMode);
        recordMessageBtn.addEventListener('click', openMessageRecorder);
        statsBtn.addEventListener('click', showStatisticsModal);
        topWakeupBtn.addEventListener('click', activateWakeupMode);
        exitWakeupBtn.addEventListener('click', exitWakeupMode);
        takeActionBtn.addEventListener('click', takeAction);
        
        // Red Zone distraction exercise
        checkAnswerBtn.addEventListener('click', checkMathAnswer);
        mathAnswerEl.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkMathAnswer();
            }
        });
        
        // Message recorder event listeners
        recordBtn.addEventListener('click', startRecording);
        playVoiceBtn.addEventListener('click', playRecordedAudio);
        saveMessageBtn.addEventListener('click', saveMessage);
        cancelRecordingBtn.addEventListener('click', closeMessageRecorder);
        
        // Message playback event listeners
        playMessageBtn.addEventListener('click', playSavedMessage);
        closePlaybackBtn.addEventListener('click', closeMessagePlayback);
        
        // User account event listeners
        logoutBtn.addEventListener('click', logout);
        closeLoginModalBtn.addEventListener('click', hideLoginModal);
        loginBtn.addEventListener('click', login);
        signupBtn.addEventListener('click', signup);
        switchToSignupEl.addEventListener('click', (e) => {
            e.preventDefault();
            switchToSignup();
        });
        switchToLoginEl.addEventListener('click', (e) => {
            e.preventDefault();
            switchToLogin();
        });
        
        // Settings event listeners
        settingsBtn.addEventListener('click', showSettingsModal);
        closeSettingsModalBtn.addEventListener('click', hideSettingsModal);
        dailyRemindersToggle.addEventListener('click', () => toggleSetting(dailyRemindersToggle, 'dailyReminders'));
        milestoneAlertsToggle.addEventListener('click', () => toggleSetting(milestoneAlertsToggle, 'milestoneAlerts'));
        motivationalMessagesToggle.addEventListener('click', () => toggleSetting(motivationalMessagesToggle, 'motivationalMessages'));
        saveDataToggle.addEventListener('click', () => toggleSetting(saveDataToggle, 'saveData'));
        clearDataBtn.addEventListener('click', clearData);
        changePasswordBtn.addEventListener('click', changePassword);
        deleteAccountBtn.addEventListener('click', deleteAccount);
        saveSettingsBtn.addEventListener('click', saveSettings);
        
        // Statistics event listeners
        closeStatsModalBtn.addEventListener('click', hideStatisticsModal);
        exportStatsBtn.addEventListener('click', exportStats);
        
        // Tab switching functionality for Wake-Up Mode
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.getAttribute('data-tab');
                
                // Remove active class from all tabs and contents
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                btn.classList.add('active');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
        
        // Interactive items in Wake-Up Mode
        interactiveItems.forEach(item => {
            item.addEventListener('click', function() {
                this.classList.toggle('expanded');
            });
        });
        
        // Tactic checkboxes
        tacticCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    showNotification("Tactic marked as completed. Keep going!");
                }
            });
        });
        
        // Start quote rotation
        function startQuoteRotation() {
            setInterval(() => {
                if (!isRunning || timeLeft > 24 * 60 * 60) {
                    getRandomMotivation();
                }
            }, 30000);
        }
        
        // Initialize app
        init();
    </script>
</body>
</html>
